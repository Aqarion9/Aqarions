


---

1️⃣ backend/manage.py

#!/usr/bin/env python
import os
import sys

def main():
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'aqarionz.settings')
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed?"
        ) from exc
    execute_from_command_line(sys.argv)

if __name__ == '__main__':
    main()


---

2️⃣ backend/aqarionz/init.py

# empty


---

3️⃣ backend/aqarionz/settings.py

from pathlib import Path

BASE_DIR = Path(__file__).resolve().parent.parent

SECRET_KEY = 'super-secret-aqarionz-key'

DEBUG = True

ALLOWED_HOSTS = ['*']

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'rest_framework',
    'graph',
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
]

ROOT_URLCONF = 'aqarionz.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {'context_processors': [
            'django.template.context_processors.debug',
            'django.template.context_processors.request',
            'django.contrib.auth.context_processors.auth',
            'django.contrib.messages.context_processors.messages',
        ],},
    },
]

WSGI_APPLICATION = 'aqarionz.wsgi.application'
ASGI_APPLICATION = 'aqarionz.asgi.application'

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}

AUTH_PASSWORD_VALIDATORS = []

LANGUAGE_CODE = 'en-us'
TIME_ZONE = 'UTC'
USE_I18N = True
USE_TZ = True
STATIC_URL = '/static/'
DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'


---

4️⃣ backend/aqarionz/urls.py

from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('api/v2/graph/', include('graph.urls')),
]


---

5️⃣ backend/aqarionz/asgi.py

import os
from django.core.asgi import get_asgi_application
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'aqarionz.settings')
application = get_asgi_application()


---

6️⃣ backend/aqarionz/wsgi.py

import os
from django.core.wsgi import get_wsgi_application
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'aqarionz.settings')
application = get_wsgi_application()


---

7️⃣ backend/graph/init.py

# empty


---

8️⃣ backend/graph/models.py

from django.db import models
import uuid

class Node(models.Model):
    LAYER_CHOICES = [('matter','Matter'),('signals','Signals'),('brains','Brains'),('governance','Governance')]
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    name = models.CharField(max_length=128)
    layer = models.CharField(max_length=20, choices=LAYER_CHOICES)
    metadata = models.JSONField(default=dict)
    x = models.FloatField(default=0.0)
    y = models.FloatField(default=0.0)
    z = models.FloatField(default=0.0)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

class Link(models.Model):
    CHANNEL_CHOICES = [('acoustic','Acoustic'),('optical','Optical'),('ionic','Ionic'),('rf','RF'),('policy','Policy')]
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    source = models.ForeignKey(Node, on_delete=models.CASCADE, related_name='outgoing')
    target = models.ForeignKey(Node, on_delete=models.CASCADE, related_name='incoming')
    channel = models.CharField(max_length=20, choices=CHANNEL_CHOICES)
    weight = models.FloatField(default=1.0)
    created_at = models.DateTimeField(auto_now_add=True)


---

9️⃣ backend/graph/serializers.py

from rest_framework import serializers
from .models import Node, Link

class NodeSerializer(serializers.ModelSerializer):
    class Meta:
        model = Node
        fields = '__all__'

class LinkSerializer(serializers.ModelSerializer):
    class Meta:
        model = Link
        fields = '__all__'


---

10️⃣ backend/graph/views.py

from rest_framework import viewsets
from rest_framework.decorators import action
from rest_framework.response import Response
from .models import Node, Link
from .serializers import NodeSerializer, LinkSerializer
import random

class NodeViewSet(viewsets.ModelViewSet):
    queryset = Node.objects.all()
    serializer_class = NodeSerializer

    @action(detail=False, methods=['post'])
    def create_random_graph(self, request):
        Node.objects.all().delete()
        Link.objects.all().delete()
        layers = ['matter','signals','brains','governance']
        nodes = [Node.objects.create(name=f"{layer}_{i}", layer=layer,
                 x=random.uniform(-5,5), y=random.uniform(-5,5), z=random.uniform(-5,5))
                 for layer in layers for i in range(3)]
        for _ in range(len(nodes)*2):
            s,t = random.sample(nodes,2)
            Link.objects.create(source=s, target=t,
                 channel=random.choice(['acoustic','optical','ionic','rf','policy']),
                 weight=random.uniform(0.5,2.0))
        return Response({"status":"success","nodes":len(nodes),"links":Link.objects.count()})

    @action(detail=False, methods=['get'])
    def graph_data(self, request):
        nodes = Node.objects.all()
        links = Link.objects.all()
        return Response({"nodes":NodeSerializer(nodes,many=True).data,
                         "links":LinkSerializer(links,many=True).data})

class LinkViewSet(viewsets.ModelViewSet):
    queryset = Link.objects.all()
    serializer_class = LinkSerializer


---

11️⃣ backend/graph/urls.py

from rest_framework.routers import DefaultRouter
from .views import NodeViewSet, LinkViewSet
from django.urls import path, include

router = DefaultRouter()
router.register(r'nodes', NodeViewSet)
router.register(r'links', LinkViewSet)

urlpatterns 
